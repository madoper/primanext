# üíº Business Logic\n\n## üìã –û–±–∑–æ—Ä Business Logic\n\n–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∫–ª—é—á–µ–≤—ã–µ –±–∏–∑–Ω–µ—Å-–∞–ª–≥–æ—Ä–∏—Ç–º—ã –∏ –ø—Ä–∞–≤–∏–ª–∞, –ª–µ–∂–∞—â–∏–µ –≤ –æ—Å–Ω–æ–≤–µ —Å–∏—Å—Ç–µ–º—ã –ü—Ä–∏–º–∞-NEXT.\n\n---\n\n## 1Ô∏è‚É£ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –§–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –†–∏—Å–∫–æ–≤\n\n### –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ\n\n- **Revenue** ‚Äî –≤—ã—Ä—É—á–∫–∞\n- **NetIncome** ‚Äî —á–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å\n- **Assets** ‚Äî –∞–∫—Ç–∏–≤—ã\n- **Liabilities** ‚Äî –ø–∞—Å—Å–∏–≤—ã\n- **CurrentRatio** ‚Äî –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ç–µ–∫—É—â–µ–π –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏\n- **QuickRatio** ‚Äî –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Å—Ä–æ—á–Ω–æ–π –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏\n- **DebtToEquity** ‚Äî –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –¥–æ–ª–≥–∞ –∫ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º—É –∫–∞–ø–∏—Ç–∞–ª—É\n- **ProfitMargin** ‚Äî –º–∞—Ä–∂–∞ –ø—Ä–∏–±—ã–ª–∏\n- **ROE** ‚Äî —Ä–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–∞–ø–∏—Ç–∞–ª–∞\n- **ROA** ‚Äî —Ä–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å –∞–∫—Ç–∏–≤–æ–≤\n\n### –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞—Å—á–µ—Ç–∞\n\n```typescript\ninterface FinancialRisk {\n  overallScore: number;      // 0-100\n  liquidityRisk: number;     // 0-100\n  solvencyRisk: number;      // 0-100\n  profitabilityRisk: number; // 0-100\n  growthRisk: number;        // 0-100\n  status: 'green' | 'yellow' | 'red';\n}\n\nfunction calculateFinancialRisk(financials: FinancialData[]): FinancialRisk {\n  const current = financials[0];  // Latest year\n  const previous = financials[1]; // Previous year\n  \n  // 1. Liquidity Risk (30% weight)\n  const liquidityRisk = calculateLiquidityRisk(current);\n  // Current Ratio < 1.0 = high risk\n  // Current Ratio 1.0-2.0 = medium risk\n  // Current Ratio > 2.0 = low risk\n  \n  // 2. Solvency Risk (25% weight)\n  const solvencyRisk = calculateSolvencyRisk(current);\n  // DebtToEquity > 2.0 = high risk\n  // DebtToEquity 1.0-2.0 = medium risk\n  // DebtToEquity < 1.0 = low risk\n  \n  // 3. Profitability Risk (25% weight)\n  const profitabilityRisk = calculateProfitabilityRisk(current);\n  // ProfitMargin < 0% = high risk\n  // ProfitMargin 0-5% = medium risk\n  // ProfitMargin > 5% = low risk\n  \n  // 4. Growth Risk (20% weight)\n  const growthRisk = calculateGrowthRisk(current, previous);\n  // Revenue decline > 20% YoY = high risk\n  // Revenue decline 0-20% YoY = medium risk\n  // Revenue growth = low risk\n  \n  // Weighted score\n  const overallScore = \n    liquidityRisk * 0.30 +\n    solvencyRisk * 0.25 +\n    profitabilityRisk * 0.25 +\n    growthRisk * 0.20;\n  \n  return {\n    overallScore,\n    liquidityRisk,\n    solvencyRisk,\n    profitabilityRisk,\n    growthRisk,\n    status: getStatus(overallScore)\n  };\n}\n\nfunction getStatus(score: number): 'green' | 'yellow' | 'red' {\n  if (score < 25) return 'green';     // Low risk\n  if (score < 70) return 'yellow';    // Medium risk\n  return 'red';                       // High risk\n}\n```\n\n---\n\n## 2Ô∏è‚É£ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –†–∏—Å–∫–æ–≤\n\n### –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö\n\n- –ê—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã–µ —Å—É–¥—ã (—Å—É–¥–µ–±–Ω—ã–µ –¥–µ–ª–∞)\n- –§–°–°–ü (–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞)\n- –õ–∏—Ü–µ–Ω–∑–∏–∏ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è\n- –®—Ç—Ä–∞—Ñ—ã –∏ –Ω–∞—Ä—É—à–µ–Ω–∏—è\n- –†–µ–µ—Å—Ç—Ä—ã –¥–∏—Å–∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–∏\n\n### –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞—Å—á–µ—Ç–∞\n\n```typescript\ninterface LegalRisk {\n  overallScore: number;           // 0-100\n  courtCasesRisk: number;         // 0-100\n  executionRisk: number;          // 0-100\n  sanctionsRisk: number;          // 0-100\n  licenseComplianceRisk: number;  // 0-100\n  status: 'green' | 'yellow' | 'red';\n  openCases: number;\n  executionAmount: number;\n  disqualifiedDirectors: number;\n}\n\nfunction calculateLegalRisk(legalData: LegalData): LegalRisk {\n  // 1. Court Cases Risk (40% weight)\n  const courtCasesRisk = calculateCourtCasesRisk(legalData.courtCases);\n  // 0 cases = 0 risk\n  // 1-5 cases = 20-40 risk\n  // 5-10 cases = 40-60 risk\n  // 10+ cases = 60-100 risk\n  // Recent cases (< 1 year) increase risk by 20%\n  \n  // 2. Execution Risk (30% weight)\n  const executionRisk = calculateExecutionRisk(legalData.executions);\n  // No executions = 0 risk\n  // Amount < 100k = 20 risk\n  // Amount 100k-1M = 50 risk\n  // Amount > 1M = 100 risk\n  \n  // 3. Sanctions Risk (20% weight)\n  const sanctionsRisk = calculateSanctionsRisk(legalData.sanctions);\n  // No sanctions = 0 risk\n  // 1-3 sanctions = 30-50 risk\n  // 3+ sanctions = 70-100 risk\n  // Recent sanctions increase risk\n  \n  // 4. License Compliance (10% weight)\n  const licenseComplianceRisk = calculateLicenseRisk(legalData.licenses);\n  // All valid = 0 risk\n  // Some invalid = 40 risk\n  // All invalid = 100 risk\n  \n  const overallScore =\n    courtCasesRisk * 0.40 +\n    executionRisk * 0.30 +\n    sanctionsRisk * 0.20 +\n    licenseComplianceRisk * 0.10;\n  \n  return {\n    overallScore,\n    courtCasesRisk,\n    executionRisk,\n    sanctionsRisk,\n    licenseComplianceRisk,\n    status: getStatus(overallScore),\n    openCases: legalData.courtCases.filter(c => c.status === 'open').length,\n    executionAmount: calculateTotalExecutionAmount(legalData.executions),\n    disqualifiedDirectors: legalData.disqualifiedDirectors.length\n  };\n}\n```\n\n---\n\n## 3Ô∏è‚É£ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –†–∏—Å–∫–æ–≤\n\n### –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö\n\n- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–æ–≤\n- –ß–∞—Å—Ç–æ—Ç–∞ —Å–º–µ–Ω—ã –∞–¥—Ä–µ—Å–∞\n- –ò—Å—Ç–æ—Ä–∏—è –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤ —É—á—Ä–µ–¥–∏—Ç–µ–ª–µ–π\n- –ê—Ñ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏\n- –°—Ä–æ–∫ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–∞–Ω–∏–∏\n\n### –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞—Å—á–µ—Ç–∞\n\n```typescript\ninterface OperationalRisk {\n  overallScore: number;                // 0-100\n  businessContinuityRisk: number;      // 0-100\n  managementStabilityRisk: number;     // 0-100\n  affiliatedRisk: number;              // 0-100\n  status: 'green' | 'yellow' | 'red';\n}\n\nfunction calculateOperationalRisk(operationalData: OperationalData): OperationalRisk {\n  // 1. Business Continuity Risk (30% weight)\n  const businessContinuityRisk = calculateBusinessContinuityRisk(operationalData);\n  // Company age < 1 year = 80 risk\n  // Company age 1-3 years = 50 risk\n  // Company age 3-5 years = 30 risk\n  // Company age > 5 years = 10 risk\n  \n  // 2. Management Stability Risk (40% weight)\n  const managementStabilityRisk = calculateManagementStabilityRisk(operationalData);\n  // Director changes in last 6 months = 30 additional points\n  // Address changes in last 6 months = 20 additional points\n  // Multiple quick ownership changes = 50 additional points\n  \n  // 3. Affiliated Risk (30% weight)\n  const affiliatedRisk = calculateAffiliatedRisk(operationalData);\n  // Calculate based on affiliated companies and their risks\n  \n  const overallScore =\n    businessContinuityRisk * 0.30 +\n    managementStabilityRisk * 0.40 +\n    affiliatedRisk * 0.30;\n  \n  return {\n    overallScore,\n    businessContinuityRisk,\n    managementStabilityRisk,\n    affiliatedRisk,\n    status: getStatus(overallScore)\n  };\n}\n```\n\n---\n\n## 4Ô∏è‚É£ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –†–µ–ø—É—Ç–∞—Ü–∏–æ–Ω–Ω—ã—Ö –†–∏—Å–∫–æ–≤\n\n### –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö\n\n- –û—Ç–∑—ã–≤—ã –∏ —Ä–µ–π—Ç–∏–Ω–≥–∏\n- –£–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤ –°–ú–ò\n- –ñ–∞–ª–æ–±—ã –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π\n- –§–∞–ª—å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –ø–æ–¥–¥–µ–ª–∫–∏\n- –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏\n\n### –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞—Å—á–µ—Ç–∞\n\n```typescript\ninterface ReputationRisk {\n  overallScore: number;         // 0-100\n  mediaRisk: number;            // 0-100\n  consumerRisk: number;         // 0-100\n  fraudRisk: number;            // 0-100\n  socialRisk: number;           // 0-100\n  sentimentScore: number;       // -1 to 1\n  status: 'green' | 'yellow' | 'red';\n}\n\nfunction calculateReputationRisk(reputationData: ReputationData): ReputationRisk {\n  // 1. Media Risk (25% weight)\n  const mediaRisk = calculateMediaRisk(reputationData.mediaArticles);\n  // Negative articles increase risk\n  // Recent articles increase risk more\n  \n  // 2. Consumer Risk (25% weight)\n  const consumerRisk = calculateConsumerRisk(reputationData.reviews);\n  // Average rating < 2.0 = 80 risk\n  // Average rating 2.0-3.0 = 50 risk\n  // Average rating 3.0-4.0 = 30 risk\n  // Average rating > 4.0 = 10 risk\n  // Recent negative reviews increase risk\n  \n  // 3. Fraud Risk (25% weight)\n  const fraudRisk = calculateFraudRisk(reputationData.fraudIndicators);\n  // Reported scams, fake documents, etc.\n  \n  // 4. Social Risk (25% weight)\n  const socialRisk = calculateSocialRisk(reputationData.socialMentions);\n  // Negative social media mentions\n  \n  const sentimentScore = calculateSentimentScore(reputationData);\n  \n  const overallScore =\n    mediaRisk * 0.25 +\n    consumerRisk * 0.25 +\n    fraudRisk * 0.25 +\n    socialRisk * 0.25;\n  \n  return {\n    overallScore,\n    mediaRisk,\n    consumerRisk,\n    fraudRisk,\n    socialRisk,\n    sentimentScore,\n    status: getStatus(overallScore)\n  };\n}\n```\n\n---\n\n## 5Ô∏è‚É£ –ê–ª–≥–æ—Ä–∏—Ç–º —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–π\n\n### –ü—Ä–æ–±–ª–µ–º–∞\n\n–û–¥–Ω–∞ –∫–æ–º–ø–∞–Ω–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ–¥ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏, –∏–º–µ—Ç—å –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –≤ –¥–∞–Ω–Ω—ã—Ö –ï–ì–†–Æ–õ, –ò–ù–ù –∏ —Ç.–¥.\n\n### –†–µ—à–µ–Ω–∏–µ\n\n```typescript\nfunction matchCompanies(query: CompanyQuery): MatchResult[] {\n  // 1. Exact matching\n  let matches = searchByINN(query.inn);\n  if (matches.length > 0) return matches;\n  \n  matches = searchByOGRN(query.ogrn);\n  if (matches.length > 0) return matches;\n  \n  // 2. Fuzzy matching on name\n  const fuzzyMatches = fuzzySearchByName(query.name);\n  \n  // 3. Filter by location (if provided)\n  if (query.address) {\n    fuzzyMatches.filter(m => {\n      const distance = levenshteinDistance(query.address, m.address);\n      return distance < 5; // Allow small differences\n    });\n  }\n  \n  // 4. Filter by OKVED (if provided)\n  if (query.okved) {\n    fuzzyMatches.filter(m => {\n      return m.okved.startsWith(query.okved.substring(0, 4));\n    });\n  }\n  \n  // 5. Sort by confidence score\n  return fuzzyMatches\n    .map(m => ({\n      ...m,\n      confidence: calculateMatchConfidence(query, m)\n    }))\n    .sort((a, b) => b.confidence - a.confidence);\n}\n\nfunction calculateMatchConfidence(query: CompanyQuery, match: Company): number {\n  let score = 0;\n  \n  // Name similarity (50% weight)\n  const nameSimilarity = jaccardSimilarity(query.name, match.name);\n  score += nameSimilarity * 0.50;\n  \n  // Address similarity (30% weight)\n  if (query.address && match.address) {\n    const addressSimilarity = jaccardSimilarity(query.address, match.address);\n    score += addressSimilarity * 0.30;\n  }\n  \n  // OKVED match (20% weight)\n  if (query.okved && match.okved) {\n    const okvedMatch = query.okved === match.okved ? 1 : 0;\n    score += okvedMatch * 0.20;\n  }\n  \n  return score; // 0-1\n}\n```\n\n---\n\n## 6Ô∏è‚É£ Graph Algorithms (–ì—Ä–∞—Ñ–æ–≤—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã)\n\n### –ü–æ–∏—Å–∫ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É –∫–æ–º–ø–∞–Ω–∏—è–º–∏\n\n```typescript\ninterface Connection {\n  source: string;        // Node ID\n  target: string;        // Node ID\n  type: 'founder' | 'office' | 'beneficial_owner' | 'director' | 'relative';\n  weight: number;        // 0-1\n  metadata?: Record<string, any>;\n}\n\nfunction findConnections(companyId: string, depth: number = 3): Graph {\n  const graph = new Graph();\n  const visited = new Set<string>();\n  \n  function traverse(nodeId: string, currentDepth: number) {\n    if (currentDepth > depth || visited.has(nodeId)) return;\n    \n    visited.add(nodeId);\n    graph.addNode(nodeId);\n    \n    // Find all connections\n    const connections = database.getConnections(nodeId);\n    \n    connections.forEach(conn => {\n      graph.addNode(conn.target);\n      graph.addEdge(nodeId, conn.target, {\n        type: conn.type,\n        weight: conn.weight\n      });\n      \n      traverse(conn.target, currentDepth + 1);\n    });\n  }\n  \n  traverse(companyId, 0);\n  return graph;\n}\n\n// Find shortest path between two companies\nfunction findShortestPath(from: string, to: string): string[] {\n  const queue = [[from]];\n  const visited = new Set<string>();\n  \n  while (queue.length > 0) {\n    const path = queue.shift()!;\n    const node = path[path.length - 1];\n    \n    if (node === to) return path;\n    if (visited.has(node)) continue;\n    \n    visited.add(node);\n    \n    const connections = database.getConnections(node);\n    connections.forEach(conn => {\n      queue.push([...path, conn.target]);\n    });\n  }\n  \n  return []; // No path found\n}\n\n// Find all common connections\nfunction findCommonConnections(company1Id: string, company2Id: string): Set<string> {\n  const connections1 = getAllConnectionsRecursive(company1Id);\n  const connections2 = getAllConnectionsRecursive(company2Id);\n  \n  return new Set([...connections1].filter(x => connections2.has(x)));\n}\n```\n\n---\n\n## 7Ô∏è‚É£ Geocoding & Mapping\n\n### Geocoding Algorithm\n\n```typescript\ninterface GeoCoordinates {\n  latitude: number;\n  longitude: number;\n  confidence: number;  // 0-1\n  source: 'yandex' | 'nominatim' | 'cached';\n}\n\nasync function geocodeAddress(address: string): Promise<GeoCoordinates> {\n  // 1. Check cache\n  const cached = await cache.get(`geo:${address}`);\n  if (cached) {\n    return { ...cached, source: 'cached' };\n  }\n  \n  // 2. Try Yandex Geocoder (preferred for Russian addresses)\n  try {\n    const yandexResult = await yandexGeocoder.geocode(address);\n    if (yandexResult.confidence > 0.8) {\n      await cache.set(`geo:${address}`, yandexResult, 86400); // Cache 24h\n      return { ...yandexResult, source: 'yandex' };\n    }\n  } catch (e) {\n    console.warn('Yandex geocoding failed:', e);\n  }\n  \n  // 3. Fallback to Nominatim (OpenStreetMap)\n  try {\n    const nominatimResult = await nominatim.geocode(address);\n    if (nominatimResult.confidence > 0.6) {\n      await cache.set(`geo:${address}`, nominatimResult, 86400);\n      return { ...nominatimResult, source: 'nominatim' };\n    }\n  } catch (e) {\n    console.warn('Nominatim geocoding failed:', e);\n  }\n  \n  throw new Error(`Unable to geocode address: ${address}`);\n}\n\n// Batch geocoding\nasync function batchGeocode(addresses: string[]): Promise<Map<string, GeoCoordinates>> {\n  const results = new Map<string, GeoCoordinates>();\n  \n  for (const address of addresses) {\n    try {\n      results.set(address, await geocodeAddress(address));\n      // Rate limiting\n      await sleep(200);\n    } catch (e) {\n      console.error(`Failed to geocode: ${address}`, e);\n    }\n  }\n  \n  return results;\n}\n```\n\n---\n\n## 8Ô∏è‚É£ Scoring & Rating\n\n### Overall Score Calculation\n\n```typescript\ninterface CompanyScore {\n  overall: number;              // 0-100\n  financial: number;            // 0-100\n  legal: number;                // 0-100\n  operational: number;          // 0-100\n  reputation: number;           // 0-100\n  recommendation: 'strong_buy' | 'buy' | 'hold' | 'sell' | 'strong_sell';\n}\n\nfunction calculateCompanyScore(company: Company): CompanyScore {\n  const financialRisk = calculateFinancialRisk(company.financials);\n  const legalRisk = calculateLegalRisk(company.legalData);\n  const operationalRisk = calculateOperationalRisk(company.operationalData);\n  const reputationRisk = calculateReputationRisk(company.reputationData);\n  \n  // Convert risks (0-100) to scores (100-0)\n  const financialScore = 100 - financialRisk.overallScore;\n  const legalScore = 100 - legalRisk.overallScore;\n  const operationalScore = 100 - operationalRisk.overallScore;\n  const reputationScore = 100 - reputationRisk.overallScore;\n  \n  // Weighted overall score\n  const overall =\n    financialScore * 0.40 +\n    legalScore * 0.35 +\n    operationalScore * 0.15 +\n    reputationScore * 0.10;\n  \n  const recommendation = getRecommendation(overall);\n  \n  return {\n    overall,\n    financial: financialScore,\n    legal: legalScore,\n    operational: operationalScore,\n    reputation: reputationScore,\n    recommendation\n  };\n}\n\nfunction getRecommendation(score: number): string {\n  if (score >= 80) return 'strong_buy';\n  if (score >= 60) return 'buy';\n  if (score >= 40) return 'hold';\n  if (score >= 20) return 'sell';\n  return 'strong_sell';\n}\n```\n\n---\n\n## 9Ô∏è‚É£ Machine Learning Features (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)\n\n### Fraud Detection\n\n```typescript\nfunction detectFraudIndicators(company: Company): FraudIndicators {\n  const indicators: FraudIndicators = {\n    indicators: [],\n    fraudScore: 0\n  };\n  \n  // 1. Multiple rapid registrations at same address\n  const otherCompaniesAtAddress = database.findCompaniesByAddress(company.address);\n  if (otherCompaniesAtAddress.length > 5) {\n    indicators.indicators.push('multiple_registrations_same_address');\n    indicators.fraudScore += 15;\n  }\n  \n  // 2. Director appears in many companies\n  const directorCompanies = database.findCompaniesByDirector(company.directorName);\n  if (directorCompanies.length > 20) {\n    indicators.indicators.push('director_in_many_companies');\n    indicators.fraudScore += 20;\n  }\n  \n  // 3. Quick ownership changes\n  const ownershipChanges = company.history.filter(\n    h => h.eventType === 'ownership_change'\n  );\n  if (ownershipChanges.length > 3) {\n    indicators.indicators.push('frequent_ownership_changes');\n    indicators.fraudScore += 25;\n  }\n  \n  // 4. Mismatched data (INN/OGRN/Name)\n  if (!validateINN(company.inn)) {\n    indicators.indicators.push('invalid_inn');\n    indicators.fraudScore += 30;\n  }\n  \n  return indicators;\n}\n```\n\n---\n\n## üìä Key Metrics & Thresholds\n\n### Financial Thresholds\n\n| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–µ–ª–µ–Ω–∞—è | –ñ–µ–ª—Ç–∞—è | –ö—Ä–∞—Å–Ω–∞—è |\n|---------|--------|--------|--------|\n| Current Ratio | > 2.0 | 1.0-2.0 | < 1.0 |\n| Debt-to-Equity | < 0.5 | 0.5-2.0 | > 2.0 |\n| Profit Margin | > 10% | 0-10% | < 0% |\n| ROE | > 15% | 5-15% | < 5% |\n| Revenue Growth | > 10% | -10-10% | < -10% |\n\n### Legal Thresholds\n\n| –°–æ–±—ã—Ç–∏–µ | –í–µ—Å |\n|--------|------|\n| –û—Ç–∫—Ä—ã—Ç–æ–µ —Å—É–¥–µ–±–Ω–æ–µ –¥–µ–ª–æ | +15 |\n| –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ | +20 |\n| –ù–µ–¥–∞–≤–Ω–æ–µ —Å—É–¥–µ–±–Ω–æ–µ –¥–µ–ª–æ (< 1 –º–µ—Å) | +10 |\n| –®—Ç—Ä–∞—Ñ > 1M —Ä—É–±–ª–µ–π | +30 |\n| –î–∏—Å–∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–∏—Ä–µ–∫—Ç–æ—Ä | +25 |\n\n---\n\n**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –î–µ–∫–∞–±—Ä—å 2024  \n**–í–µ—Ä—Å–∏—è:** 2.0 Business Logic Spec\n